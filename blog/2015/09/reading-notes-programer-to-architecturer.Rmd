---
author: "patrick.unicorn"
output:
  html_document:
    css: ../../css/main.css
    highlight: null
    theme: null
---

读《程序员向架构师转型必备》
===

<q>
机会、人才、技术和产品是公司成长的主要牵动力。机会牵引人才，人才牵引技术，技术牵引产品，产品牵引更大机会。人才锁找我的知识处于最核心的部位。 -- 《华为研发》
</q>

+ 以能力层次来看，程序员成金字塔型，中高端人才缺失；以学历层次来看，程序员成橄榄型，本科学历最多。

+ 软件企业发展的好坏取决于如下因素：

<blockquote>
+ 员工素质
+ 人才结构
+ 员工职业技能的纵深积累
+ 员工职业技能的适时更新
</blockquote>

+ 纯粹靠从外部招人的人才策略不现实。

+ 架构设计主要思想：

<blockquote>
#### 分而治之

+ 聚焦不同方面，更有效思考。
+ 化大问题为子问题。

#### 迭代式设计

+ 不同视图设计交替迭代展开。
+ 逻辑划分逐步清晰，促进物理分布设计；反之亦然。
</blockquote>

+ 架构设计主要视图：

<blockquote>
+ 逻辑视图
+ 物理视图

|逻辑视图||物理视图|
|--|--|--|
|浅层设计| >> |浅层设计|
|<<||<<|  
|深层设计|>>|深层设计|
</blockquote>

+ 小系统和大系统的架构设计之不同，首先是概念架构上的不同，而归根溯源这是由于架构锁支撑的“关键需求”不同造成的。整个架构设计过程中的“确定关键需求”这一环节，可谓小系统和大系统架构设计的“分水岭”。

+ **概念架构**指系统目标的设计思想、重大选择。《方案建议书》《技术白皮书》和市场彩页中，都有它的身影，以说明产品/项目/方案的技术优势。因此，也成为“市场（业务）架构”。

+ 概念架构设计内容：

<blockquote>
#### 一个决定

划分顶级子系统

#### 四个选型

+ 架构风格选型
+ 开发技术选型
+ 集成技术选型
+ 二次开发技术选型
</blockquote>

+ 如何做概念架构设计：

<blockquote>
+ 首先，选择架构风格、划分顶级子系统。两者相互影响、相辅相成。
+ 然后开发技术选型、集成技术选型、二次开发技术选型。三者紧密相关、同时进行。集成技术和二次开发业可能不需要。
</blockquote>

+ 破解领域知识不足的有效方法：把领域模型作为“理解领域的手段”。领域模型的强项是“理顺概念关系、搞清业务规则”，通过对复杂领域进行“概念抽象”和“关系抽象”建立模型、获得对领域知识总体上的把握。

+ 软件架构的定义：

<blockquote>
#### 组成派

软件架构将系统描述计算组件及组件间的交互。关注软件本身。

#### 决策派

软件架构是在一些重要方面所作出的决策的集合。关注实践主体--人。

这些重要决策如下：

+ 模块如何划分。
+ 每个模块的职责如何。
+ 每个模块的接口定义。
+ 模块间的交互机制。
+ 开发技术选型。
+ ...
</blockquote>

+ 软件架构师分与合的艺术。

+ 架构设计是一棵决策树：

![架构设计过程](../../images/content/reading-notes-programer-to-architecturer-01.png)

+ 软件是由递归的组件的递归组成的。系统、子系统和框架均需要架构设计。

+ 架构就是对**复杂单元**进行分解，并规定各部分之间的交互。

+ 架构设计的几个误解：

<blockquote>
+ 架构设计是技术选型
+ 架构设计是通用模块
+ 投标PPT中的架构就是架构的全部
</blockquote>

+ 在使用第三方库时候，如果希望将来可以替换该SDK，那么可以采用适配器模式：定义一套业务接口，实现接口（调用第三方库）。

+ 架构设计是一门解决复杂性的**艺术**。

+ 架构的不同受众者需要的“架构的样子”是不一样的。因此，架构师需要以不同的视图架构。

<blockquote>
技术经理：软件架构就是模块的划分和接口定义。
系统分析师：软件架构就是业务领域模型的关系建模。
数据库工程师：软件架构就是规定了数据结构，其他只不过是对数据的操作而已。
部署工程师：软件架构就是规定了软件部署到硬件的策略。
...
</blockquote>

+ 为用户设计，不仅满足用户需求的功能，也要达到用户期望的质量。

+ 客户 ≠ 最终用户

+ 先研究需求，再设计架构，然后交由开发人员实现。作为架构，不仅要为用户服务，还要为“下游”的开发人员设计。需求不仅包含用户的需求，也包含开发人员的需求。比如易测试性功能需求。

+ 软件复杂体现在两个方面：1. 软件本身的复杂性；2. 团队管理复杂性。

+ 开发人员之间的依赖源于他们负责的程序之间的依赖性。要清楚管理人员的协作，就必须清晰划分模块（子系统）。架构是**开发**和**管理**的核心。

+ 架构师应当为项目相关的不同角色而设计。手段就是多视图：

<blockquote>
+ 架构师要为“上游”客户负责，为他们的业务目标和约束条件负责。
+ 架构师要为“上游”用户负责，使他们关心的功能需求和运行质量属性得以满足。
+ 架构师必须顾及“下游”开发人员的协作分工。
+ 架构师必须考虑周边的管理人员，如配置管理员、运维工程师等。
</blockquote>

+ 一个架构视图是对于从某一视角或某一点上看到的系统所做的简化描述，描述中涵盖了系统的特定方面，而忽略了与之无关的其他方面。

+ 架构设计是一种手段：

<blockquote>
+ 架构设计包含太多决策，超过了人脑“一蹴而就”的能力范围，因此，采用“分而治之”的办法从不同视角分别设计。
+ 同时为软件架构的理解、交流、归档提供便利。
</blockquote>

+ 使用逻辑视图和物理视图刻画大局非常有效。、

![逻辑和物理架构设计](../../images/content/reading-notes-programer-to-architecturer-02.png)

+ 软件的逻辑架构（视图）规定了软件系统的逻辑单元及交互。具体指逻辑层、功能子系统、模块等。其核心任务是识别模块、规划接口，明确模块间使用关系和使用机制。

+ 软件的物理架构（视图）规定了组成系统的物理元素以及它们之间的联系和交互、部署和硬件策略等。

+ 分布式系统的流行，使得“物理层”的概念和设计比较流行和常态了。

+ 多视图≠多阶段，不应瀑布式的设计每个视图，而是应该迭代式设计。尤其对于大型系统而言，完全设计好逻辑视图后，再设计物理视图，是有很大问题的。

+ 程序员向架构师转变，难在何处？难在必须“试着做起来”，并慢慢积累感觉，进而积累经验。

+ “需求决定架构”之所以是一句废话，在于其并没有告诉开发人员“如何做架构设计”。

+ 架构设计三个原则：

<blockquote>
+ 看透需求。架构师可能不是“需求”和“领域模型”的负责人，但必须深入了解。
+ 大方向（即概念架构）正确。“关键需求”决定“概念架构”。
+ 覆盖各个方面。通过多视图方法细化架构，满足不同角色的需求。
</blockquote>

+ 看透需求，不仅要把需求找全，还要把需求项之间的矛盾关系、追溯关系搞清楚。

+ 越是复杂的系统，越需要多视图设计。这样才能把问题研究和表达清楚。

+ 什么是概念架构（架构大方向）：

<blockquote>
+ 作为架构师，进行大中型系统设计时，应该先比较几种主流概念架构。
+ 如果是售前，你所提到的架构，就是概念架构。
+ 如果你去投标，那么你提到的也是概念架构。
</blockquote>

+ 有经验的架构师不会一上来就关注“模块+接口”设计，而是优先关注：1. 重大需求；2. 特色需求；3. 高风险需求。

+ 架构设计六大步骤：

<blockquote>
1. 需求分析
2. 领域建模

领域建模的目的在于：透过问题领域的重重现象，捕捉其背后最为稳固的概念以及这些概念之间的联系。架构师本人最好是作为领域建模的领导者。

3. 确定关键需求
4. 概念架构设计

概念架构设计必须给出“一个决定、4个选型”。

5. 细化架构设计

指从五个不同视图进行设计：逻辑架构、开发架构、运行架构、物理架构、数据架构。

6. 验证架构设计
</blockquote>

+ 需求分析工作内容：

![需求分析工作](../../images/content/reading-notes-programer-to-architecturer-03.png)

<blockquote>
1. 需求沟通。
2. 确定非功能需求。

这是一个持续过程。

3. 需求分析主线。

![需求分析主线](../../images/content/reading-notes-programer-to-architecturer-04.png)

</blockquote>

+ 领域建模的精髓是“业务决定功能，功能决定模型”。领域建模的输入是**当前的功能**和**未来的功能**。

![需求分析主线](../../images/content/reading-notes-programer-to-architecturer-05.png)

+ 关键需求决定架构大方向。

![关键需求确认](../../images/content/reading-notes-programer-to-architecturer-06.png)

+ 概念架构设计输入是“关键需求”，输出是“一个决定，四个选择”：

![关键需求确认](../../images/content/reading-notes-programer-to-architecturer-07.png)

+ 概念架构和细化架构的关键区别是：概念架构没有设计到“模块”+“接口”一级，而细化架构必须关注“模块”+“接口”：

![细化架构的位置](../../images/content/reading-notes-programer-to-architecturer-08.png)

![细化架构内容](../../images/content/reading-notes-programer-to-architecturer-09.png)

![细化架构输入输出](../../images/content/reading-notes-programer-to-architecturer-10.png)

+ 架构验证需要根据情形判断是否有必要。其目的在于尽早将那些有风险的重要部分开发出来，及早验证。

![架构验证的位置](../../images/content/reading-notes-programer-to-architecturer-11.png)

+ 